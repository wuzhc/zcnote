## 生成秘钥和公钥
```bash
# 秘钥
openssl genrsa -out rsa_private_key.pem 1024  

# 公钥
openssl rsa -in rsa_private_key.pem -pubout -out rsa_public_key.pem  
```



## php

```php
openssl_public_encrypt($params, $encrypted, $pu_key);//公钥加密
openssl_private_decrypt(base64_decode($params), $decrypted, $pi_key);//私钥解密
```



## RSA的公钥和私钥到底哪个才是用来加密和哪个用来解密?

其实公钥和私钥都可以用来加密或解密---只要能保证用A加密，就用B解密就行。至于A是公钥还是私钥，其实可以根据不同的用途而定。  
例如说，如果你想把某个消息秘密的发给某人，那你就可以用他的公钥加密。因为只有他知道他的私钥，所以这消息也就只有他本人能解开，于是你就达到了你的目的。  
但是如果你想发布一个公告，需要一个手段来证明这确实是你本人发的，而不是其他人冒名顶替的。那你可以在你的公告开头或者结尾附上一段用你的私钥加密的内容（例如说就是你公告正文的一段话），那所有其他人都可以用你的公钥来解密，看看解出来的内容是不是相符的。如果是的话，那就说明这公告确实是你发的---因为只有你的公钥才能解开你的私钥加密的内容，而其他人是拿不到你的私钥的。  

最后再说一下数字签名。  
数字签名无非就两个目的：  
证明这消息是你发的；  
证明这消息内容确实是完整的---也就是没有经过任何形式的篡改（包括替换、缺少、新增）。  
其实，上面关于“公告”那段内容，已经证明了第一点：证明这消息是你发的。  
那么要做到第二点，也很简单，就是把你公告的原文做一次哈希（md5或者sha1都行），然后用你的私钥加密这段哈希作为签名，并一起公布出去。当别人收到你的公告时，他可以用你的公钥解密你的签名，如果解密成功，并且解密出来的哈希值确实和你的公告原文一致，那么他就证明了两点：这消息确实是你发的，而且内容是完整的。  