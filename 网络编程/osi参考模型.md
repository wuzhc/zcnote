## 七层模型
- 应用层,能够产生流量的应用程序
- 表示层,在传输之前是否进行加密或压缩处理
- 会话层,建立连接即有会话,查看计算机是否有木马,即看有没有连接
- 传输层,可靠传输(重传问题),流量控制,不可靠传输
- 网络层,负责选择最佳路径,规划IP地址
- 数据链路层,定义了帧的开始和结束,透明传输,差错校验
- 物理层,接口标准,电器标准

ipv4和ipv6变化的是在网络层,其他层没有改变

## 故障
- 物理层故障
查看连接状态,查看发送和接收的数据包
- 数据链路层故障
mac地址冲突,mac地址居然可以修改,ADSL欠费,网速没办法协商一致
- 网络层故障
配置错误IP地址,子网掩码,配置错误网关,路由器没有到达
- 应用层故障
不知道啊

VLAN
网络层安全
在路由器上使用ACL控制数据包流量



## 数据的封装
- 应用层: 上层数据
- 传输层: tcp头 + (上层数据) ---------------> 数据段
- 网络层: ip头 + (tcp头 + (上层数据)) -------------> 数据包
- 数据链路层: mac头 + (ip头 + (tcp头 + 上层数据)) --------> 数据帧

TCP/IP 分层联网协议，包括数据链路层，网络层，传输层，应用层（底层到高层）  
![](../images/tcp_ip.png)  

### 数据传递
高层传递信息给底层，底层不会解析高层数据，它会加上底层自己的信息头，继续往下层传递；相反，底层传递给高层会对数据进行一层层解析（逆向解包）

### 数据链路层
- 从网络层传递过来的数据报封装到一个个帧，每个帧除了传递的数据之外，帧头还包含目标地址和帧大小；数据链路层传输帧，这一层会进行错误检测，重传以及流量控制；多个帧会在接收端进行重组；
- 最大传输单元MTU，是传输的帧大小的上限

### 网络层
- 网络层主要协议是IP，IP以数据报的形式传输数据，一个数据报包含目标地址，源地址，从而可以路由到目标地址
- IP是无连接和不可靠的协议，可靠性由传输层协议TCP或应用程序保证
- 当IP数据报大于MTU时，会进行分段，以便封装到帧中（因为IP是不可靠协议，这可能导致数据丢失，因此应当避免对IP数据报分段，这样情况就是要在传输层处理了，只要传输层传给网络层时数据报不会大于MTU就可以了，所以说可靠性需要由传输层来保证）

### 传输层
- 包括用户数据报协议UDP，传输控制协议TCP